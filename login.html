<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Login & Register</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div class="login-container">
            <div class="login-box">
                <div class="login-logo">Philippine<span>Presidents</span></div>
                
                <!-- Toggle buttons for switching between login and register -->
                <div class="toggle-buttons">
                    <button id="showLoginBtn" class="toggle-btn active">Login</button>
                    <button id="showRegisterBtn" class="toggle-btn">Register</button>
                </div>
                
                <!-- Login Form -->
                <div id="loginSection">
                    <h2 class="login-title">Login to Continue</h2>
                    
                    <form class="login-form" id="loginForm">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" name="username" required placeholder="Enter your username">
                        </div>
                        
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" name="password" required placeholder="Enter your password">
                        </div>
                        
                        <button type="submit" class="login-btn">Login</button>
                        <p class="error-message" id="loginErrorMessage">Invalid username or password</p>
                    </form>
                </div>
                
                <!-- Registration Form -->
                <div id="registerSection" style="display: none;">
                    <h2 class="login-title">Create an Account</h2>
                    
                    <form class="login-form" id="registerForm">
                        <div class="form-group">
                            <label for="regUsername">Username</label>
                            <input type="text" id="regUsername" name="regUsername" required placeholder="Choose a username">
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required placeholder="Enter your email">
                        </div>
                        
                        <div class="form-group">
                            <label for="regPassword">Password</label>
                            <input type="password" id="regPassword" name="regPassword" required placeholder="Choose a password">
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="Confirm your password">
                        </div>
                        
                        <button type="submit" class="login-btn">Register</button>
                        <p class="error-message" id="registerErrorMessage">Registration error</p>
                        <p class="success-message" id="registerSuccessMessage">Registration successful! You can now login.</p>
                    </form>
                </div>
            </div>
        </div>
    
        <script>
            // Toggle between login and registration forms
            document.getElementById('showLoginBtn').addEventListener('click', function() {
                document.getElementById('loginSection').style.display = 'block';
                document.getElementById('registerSection').style.display = 'none';
                document.getElementById('showLoginBtn').classList.add('active');
                document.getElementById('showRegisterBtn').classList.remove('active');
            });
            
            document.getElementById('showRegisterBtn').addEventListener('click', function() {
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('registerSection').style.display = 'block';
                document.getElementById('showLoginBtn').classList.remove('active');
                document.getElementById('showRegisterBtn').classList.add('active');
            });
            
            // Handle login form submission
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get user data from localStorage
                const usersData = JSON.parse(localStorage.getItem('users')) || [];
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                // Default credentials (for demo purposes only)
                const validUsername = 'admin';
                const validPassword = 'philippines';
                
                // Check if default credentials are used
                if (username === validUsername && password === validPassword) {
                    localStorage.setItem('isAuthenticated', 'true');
                    window.location.href = 'index.html';
                    return;
                }
                
                // Check if user exists in localStorage
                const user = usersData.find(u => u.username === username && u.password === password);
                
                if (user) {
                    // Store login status in localStorage
                    localStorage.setItem('isAuthenticated', 'true');
                    localStorage.setItem('currentUser', username);
                    
                    // Redirect to index.html
                    window.location.href = 'index.html';
                } else {
                    // Show error message
                    document.getElementById('loginErrorMessage').style.display = 'block';
                }
            });
            
            // Handle registration form submission
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('regUsername').value;
                const email = document.getElementById('email').value;
                const password = document.getElementById('regPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                // Error message element
                const errorMsg = document.getElementById('registerErrorMessage');
                const successMsg = document.getElementById('registerSuccessMessage');
                
                // Hide any previous messages
                errorMsg.style.display = 'none';
                successMsg.style.display = 'none';
                
                // Validate passwords match
                if (password !== confirmPassword) {
                    errorMsg.textContent = 'Passwords do not match';
                    errorMsg.style.display = 'block';
                    return;
                }
                
                // Get existing users or create new array
                const users = JSON.parse(localStorage.getItem('users')) || [];
                
                // Check if username already exists
                if (users.some(user => user.username === username)) {
                    errorMsg.textContent = 'Username already exists';
                    errorMsg.style.display = 'block';
                    return;
                }
                
                // Check if email already exists
                if (users.some(user => user.email === email)) {
                    errorMsg.textContent = 'Email already registered';
                    errorMsg.style.display = 'block';
                    return;
                }
                
                // Add new user
                users.push({
                    username: username,
                    email: email,
                    password: password
                });
                
                // Save updated users array
                localStorage.setItem('users', JSON.stringify(users));
                
                // Show success message
                successMsg.style.display = 'block';
                
                // Reset form
                document.getElementById('registerForm').reset();
                
                // Switch to login form after a delay
                setTimeout(function() {
                    document.getElementById('showLoginBtn').click();
                }, 2000);
            });
    
            // Check if user is already logged in (optional)
            if (localStorage.getItem('isAuthenticated') === 'true') {
                window.location.href = 'index.html';
            }
        </script>
    </body>
</html>